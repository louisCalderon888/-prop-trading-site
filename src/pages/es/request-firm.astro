---
import Layout from '../../layouts/Layout.astro';
import Header from '../../components/Header.astro';
import Footer from '../../components/Footer.astro';

const title = "Solicitar Prop Firm | PropFundingCodes";
const description = "¿No encuentras tu empresa favorita? Solicítala y la agregaremos a nuestro sistema de rastreo con cupones verificados.";
---

<Layout title={title} description={description}>
  <Header />
  
  <main>
    <section class="hero bg-slate-900/50 min-h-[40vh]">
      <div class="container text-center">
        <h1 class="mb-6">
          Solicitar una <span class="text-gradient">Prop Firm</span>
        </h1>
        <p class="subtitle mx-auto">
          Rastreamos más de 20 empresas, pero si falta alguna, avísanos. La verificaremos y agregaremos a nuestra base de datos.
        </p>
      </div>
    </section>
    
    <section class="section">
      <div class="container max-w-2xl">
        <div class="card bg-slate-800/50 border border-slate-700 p-8">
          <form id="request-form-es" class="space-y-6">
            <div>
              <label for="firmName" class="block text-sm font-medium text-gray-300 mb-2">Nombre de Prop Firm *</label>
              <input 
                type="text" 
                id="firmName" 
                name="firmName" 
                required
                class="w-full bg-slate-900 border border-slate-600 rounded-lg px-4 py-3 text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent outline-none transition"
                placeholder="ej. Acme Trader Funding"
              />
            </div>
            
            <div>
              <label for="website" class="block text-sm font-medium text-gray-300 mb-2">Sitio Web *</label>
              <input 
                type="url" 
                id="website" 
                name="website" 
                required
                class="w-full bg-slate-900 border border-slate-600 rounded-lg px-4 py-3 text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent outline-none transition"
                placeholder="https://ejemplo.com"
              />
            </div>
            
            <div>
              <label for="email" class="block text-sm font-medium text-gray-300 mb-2">Tu Email (Opcional)</label>
              <input 
                type="email" 
                id="email" 
                name="email" 
                class="w-full bg-slate-900 border border-slate-600 rounded-lg px-4 py-3 text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent outline-none transition"
                placeholder="Te avisaremos cuando se agregue"
              />
              <p class="text-xs text-gray-500 mt-1">Respetamos tu privacidad. Sin spam.</p>
            </div>
            
            <button type="submit" class="btn btn-primary w-full py-4 text-lg">
              Enviar Solicitud
            </button>
            
            <p id="form-status" class="text-center text-sm font-medium hidden"></p>
          </form>
        </div>
      </div>
    </section>
  </main>
  
  <Footer />
</Layout>

<script>
  const form = document.getElementById('request-form-es');
  const status = document.getElementById('form-status');
  
  if (form) {
    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      
      const btn = form.querySelector('button');
      if (btn) {
        btn.disabled = true;
        btn.textContent = "Enviando...";
      }
      
      // Simulate API call
      await new Promise(resolve => setTimeout(resolve, 1000));
      
      if (status) {
        status.textContent = "✅ Solicitud recibida. La revisaremos pronto.";
        status.classList.remove('hidden');
        status.classList.add('text-emerald-400');
      }
      
      if (btn) {
        btn.textContent = "Enviado";
        btn.classList.add('bg-slate-700', 'text-gray-400', 'cursor-not-allowed');
      }
      
      const formData = new FormData(e.target as HTMLFormElement);
      console.log('Submission:', Object.fromEntries(formData));
    });
  }
</script>
